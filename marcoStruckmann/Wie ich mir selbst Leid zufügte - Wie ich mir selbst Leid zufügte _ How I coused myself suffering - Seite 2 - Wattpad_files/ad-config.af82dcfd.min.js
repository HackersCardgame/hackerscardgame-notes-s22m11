var __adConfig=function(){function s(e){return e.split("-")[0]}function r(e,t){var n=_.get(wattpad,"testGroups.GDPR_ADS_EXPERIENCE",!1),a=_.get(wattpad,"testGroups.EXCLUDE_PREBID_PARTNERS",!1),d=wattpad&&wattpad.utils?wattpad.utils.getDeviceType():"",i=_.get(wattpad,"userCountryCode",""),r=function(e,t){var n=wattpad.utils.getIxPrebidSizes(t),a=[{gdprEnabled:!0,exclude:{},config:{bidder:"rubicon",params:{accountId:7941,siteId:346974,zoneId:t.rubiconZone}}},{gdprEnabled:!0,exclude:{desktop:["AE"],mobile:["SA"]},config:{bidder:"pubmatic",params:{publisherId:"159971",adSlot:t.pubmaticSlot?t.pubmaticSlot.toString():null}}},{gdprEnabled:!0,exclude:{desktop:["BR","IN","TR"]},config:{bidder:"criteo",params:{networkId:10933}}},{gdprEnabled:!0,exclude:{},config:{bidder:"triplelift",params:{inventoryCode:t.tripleliftInvCode}}},{gdprEnabled:!0,exclude:{desktop:["IN","AR","PL"],mobile:["PL","CL"]},config:{bidder:"openx",params:{unit:t.openXUnitId,delDomain:"wattpad-d.openx.net"}}},{gdprEnabled:!1,exclude:{desktop:["IN"],mobile:[]},config:{bidder:"sovrn",params:{tagid:t.sovrnTag?t.sovrnTag.toString():null}}},{gdprEnabled:!1,exclude:{desktop:["AE"],mobile:[]},config:{bidder:"onemobile",params:{dcn:"8a9690f1017575bc3e53bd52ec5100bc",pos:e}}},{gdprEnabled:!0,exclude:{},config:{bidder:"appnexus",params:{placementId:t.appnexusPlacementId}}},{gdprEnabled:!0,exclude:{},config:{bidder:"sharethrough",params:{pkey:t.sharethroughPKey}}}];return n.forEach(function(e){a.push({gdprEnabled:!1,exclude:{},config:e})}),a}(e,t),o={rubicon:["accountId","siteId","zoneId"],pubmatic:["publisherId","adSlot"],criteo:["networkId"],triplelift:["inventoryCode"],openx:["unit","delDomain"],sovrn:["tagid"],onemobile:["dcn","pos"],appnexus:["placementId"],sharethrough:["pkey"],ix:["siteId","size"]};return r.reduce(function(e,t){return function(e){var t=e.config,n=!0;return o[t.bidder].forEach(function(e){t.params.hasOwnProperty(e)&&t.params[e]||(n=!1)}),n}(t)&&function(e){return!n||e.gdprEnabled}(t)&&!function(e){var t=e.exclude[d]||[];return a&&t.includes(i)}(t)&&function(e){return!e.onlyInCountry||e.onlyInCountry.includes(i)}(t)&&e.push(t.config),e},[])}var u,t=wattpad.adzerkHeaderBiddingUnitMap,o=function(e){if(t.hasOwnProperty(e))return t[e]},c=window.IntersectionObserver&&window.IntersectionObserverEntry&&window.IntersectionObserverEntry.prototype&&"intersectionRatio"in window.IntersectionObserverEntry.prototype;c&&(u=new IntersectionObserver(function(e,t){e.forEach(function(e){e.isIntersecting&&(e.target.classList.contains("hasRun")||(e.target.classList.add("hasRun"),t.unobserve(e.target),p(e.target.getAttribute("id"))))})},{rootMargin:"0px 0px",root:null,threshold:0}));function e(e){if(null!==e.detail){var t=e.detail.shouldDelayAds,n=e.detail.shouldShowAds,a=t||!n,d=e.detail.lazyLoadAd,i=document.getElementById(e.detail.adUnitId);i?a?wattpad.utils.generateAndRenderHardcodedCreative(e.detail.adUnitId):d&&c&&!i.classList.contains("hasIO")?(i.classList.add("hasIO"),u.observe(i)):i.classList.contains("hasRun")?console.warn("auction already ran on adUnitId: "+e.detail.adUnitId):(i.classList.add("hasRun"),p(e.detail.adUnitId)):console.error("unable to find "+e.detail.adUnitId+" in the DOM")}else{var r=document.querySelectorAll(".advertisement:not(.hasRun):not(.outstream_video):not(.hc):not(.storylanding_top):not(.storylanding_bottom_mweb)");if(r.length)for(var o=0;o<r.length;o++){var s=r[o];c&&s.classList.contains("lazyAd")&&!s.classList.contains("hasIO")?(s.classList.add("hasIO"),u.observe(document.getElementById(s.id))):(s.classList.add("hasRun"),p(s.id))}}}var p=function(e){var t,n,a,d={placements:{}},i=s(e),r=wattpad.utils.getPlacementConfiguration(i);d.placements[e]={zoneId:r.zone,htSlotName:i},app&&app.currentView&&app.currentView.model&&(n=(t=app.currentView.model.attributes).group?t.group:t,a=t.group?t:void 0);var o={siteId:1025452,networkId:9660,adTypes:Object.keys(_.get(r,"sizes",{})).map(function(e){return parseInt(e,10)}),targeting:wattpad.utils.getAdzerkTargeting(n,a,wattpad.utils.currentUser().toJSON()||{})};_.merge(d.placements[e],o),wattpad.utils.loadHbAdPrebid(d)};return window.addEventListener("ad-available",e),{getPrebidAdUnits:function(e){var i=[];return e.forEach(function(e){var t=s(e),n=function(e){var t=o(e);return t?Object.values(t.sizes):[]}(t),a=o(t),d={code:e,mediaTypes:{banner:{sizes:n}},bids:r(t,a)};i.push(d)}),i},configurePrebid:function(e){if(e&&e.getEvents&&0===e.getEvents().length){var t=[{name:"criteo"},{name:"pubCommonId",storage:{type:"cookie",name:"_pubcid",expires:365}}];_.get(window,"wattpad.testGroups.USE_33ACROSS",!1)&&t.push({name:"33acrossId",params:{pid:"0015a0000341H3PAAU"},storage:{name:"33acrossId",type:"html5",expires:90,refreshInSeconds:28800}});var n=n||window.PWT||{};if(n&&n.getUserIds){var a=n.getUserIds();a.tdid&&t.push({name:"unifiedId",value:{tdid:a.tdid}})}e.onEvent("bidResponse",function(e){var t=wattpad.utils.normalizeBids([e],wattpad.utils.getBidFormat("prebid"))[0];if("undefined"!=typeof __atha){var n=__atha.sendBid(e.adUnitCode,_.get(t,"partner","unknown"),_.get(t,"bic",void 0),t.dimensions);e.id=n}});var d={consentManagement:{usp:{cmpApi:"iab",timeout:100}},userSync:{userIds:t,filterSettings:{iframe:{bidders:"*",filter:"include"}}}};_.get(window,"wattpad.testGroups.GDPR_ADS_EXPERIENCE",!1)&&(d.consentManagement.gdpr={cmpApi:"iab",timeout:8e3,defaultGdprScope:!0}),e.setConfig(d)}},getAdCommentFromPrebidBid:function(e){return wattpad.utils.sprintf("p:%s c:%s m:%s",[e.bidder,e.creativeId,JSON.stringify(e.meta)])}}}();"undefined"!=typeof module&&(module.exports=__adConfig);
//# sourceMappingURL=ad-config.af82dcfd.min.js.map
